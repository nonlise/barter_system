{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h2>Входящие предложения обмена</h2>
    
    <div class="list-group">
        {% for proposal in proposals %}
        <div class="list-group-item mb-3">
            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h5>Предложение #{{ proposal.id }}</h5>
                    <p><strong>От:</strong> {{ proposal.ad_sender.user.username }}</p>
                    <p><strong>Предлагает:</strong> {{ proposal.ad_sender.title }}</p>
                    <p><strong>В обмен на:</strong> {{ proposal.ad_receiver.title }}</p>
                    <p><strong>Комментарий:</strong> {{ proposal.comment }}</p>
                    <p class="badge bg-{% if proposal.status == 'pending' %}warning{% elif proposal.status == 'accepted' %}success{% else %}danger{% endif %}">
                        Статус: {{ proposal.get_status_display }}
                    </p>
                </div>
                {% if proposal.status == 'pending' %}
                <div class="btn-group">
                    <a href="{% url 'ads:accept_proposal' proposal.id %}" class="btn btn-sm btn-success">Принять</a>
                    <a href="{% url 'ads:reject_proposal' proposal.id %}" class="btn btn-sm btn-danger">Отклонить</a>
                </div>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <div class="alert alert-info">Нет входящих предложений</div>
        {% endfor %}
    </div>
</div>
{% endblock %}